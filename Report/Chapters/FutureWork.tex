\chapter{Future Work}
\label{futurework}
There are a number of improvements that can be applied to the approaches presented in the paper. The following are the areas with the greatest potential for improvements with suggestions as to how to approach improving these areas.
\section{Complete Compatibility}
\label{futurework_compatibility}
As noted in section \ref{results_quality}, the maps generated using the methods presented in this paper are not guaranteed to be completely compatible with StarCraft II. While a human designer can easily interpret the layouts produced and implement the maps in the StarCraft II editor, it was not the original aim of this thesis. The challenge of adapting the generated maps to be completely compatible is two-part. First the generated maps must be adapted to follow the strict layout constraints, secondly the output of the generator must be usable by the StarCraft II game or editor. 

\subsubsection{Layout Constraints}
StarCraft II maps are constrained somewhat tightly in a number of areas, but particularly in terms of high-ground and cliff placement. Because increases in height levels are done in shapes with a minimum size of 2x2, many of the maps generated by the approaches presented in this paper are not viable as actual StarCraft maps, as they cannot be created in the editor. Figure \ref{fig:futurework_compatibility_illegalcliffplacement} shows an example of the issue.

\insertTwoPictures{Illegal_Cliff_Placement}{Legal_Cliff_Placement}{An example of generated cliff and high-ground placement (left) compared to actual legal placement (right).}{futurework_compatibility_illegalcliffplacement}

There are several approaches that can applied in order to fix this issue. One approach would be to make sure the cellular automata only generates viable base maps by generating the height levels using a grid that is split into 2x2 squares, such that a 128x128 size map becomes a 64x64 size grid when generating height levels. This approach would also require more strict conversion rules (from genotype to phenotype) in order to not break the layout constraints. Another approach would be to apply post-processing to maps after searching in order to smooth away the illegal map elements, but this would likely be very expensive (in run-time) and runs a high risk of altering the fitness of a map, which in turn may necessitate a new search. 

\subsubsection{File Format}
Currently the StarCraft II map editor does not support importing layout information into the editor\footnote{Except by opening StarCraft II map files.}, so further work must be done in order to completely take the human designer out of the map generation process. The optimal solution would be to make the generation process part of the StarCraft II game (or implement it as part of the editor), but this would require work on part of the developer. An alternate approach would be to reverse engineer the StarCraft II map file format, and generate map files as the output of the editor.

\section{Map Making Guidelines}
\label{futurework_guidelines}
A list of rules for StarCraft II map making exists on the Battle.Net\footnote{The Battle.Net forums are the combined official forums for the games made by Blizzard Entertainment.} forums\cite{blizzardrulesmapmaking}. These rules are both guidelines for making good maps in general, but are in particular a checklist for maps made for the competitive scene. Of the 11 rules listed, five rules (2, 8, 9, 10, and 11) are related to aesthetics and performance, not balance, so they are not particular relevant for the what this thesis aims to do\footnote{In case a generator is made fully compatible with StarCraft II, they are worth revisiting.}. Two of the 11 rules (4 and 7) are automatically enforced during search. The remaining four rules are as follows:

\begin{my_itemize}
\item "\textbf{1)} Always use diagonal ramps."
\item "\textbf{3)} There should be, at minimum, 40-50 in-game seconds from nat2nat (rush distance)."\footnote{"nat2nat" means from natural expansion to natural expansion.}
\item "\textbf{5)} Always leave room for at least a spawning pool behind mineral lines in your main and natural."
\item "\textbf{6)} Always leave room for static defenses behind mineral lines at all other bases."
\end{my_itemize}

In the method presented in this thesis, only horizontal and vertical ramps are used during the search. This is in sharp contrast to rule 1. Diagonal ramps are recommended because they are easier to defend. This is mainly due to diagonal ramps requiring the defending player to "block"\footnote{Blocking refers to placing buildings, such as barracks, in a way that prevent units from moving through a space.} fewer (seven) tiles compared to horizontal or vertical ramps, which require blocking eight tiles in order to prevent units from moving up the ramp.

The fitness function presented in this paper does not take into account rules 3, 5, and 6. Instead the rush distance between main bases are considered when calculating the fitness, and the flattening of the area around bases when they are placed almost always guarantee that rules 5 and 6 are considered during generation.

\section{Fitness Function Improvements}
\label{futurework_fitness}

%more advanced openness detection
%consider more than just 1 path between bases
%include unit-specific elements
%consider bell curve
\section{Feasibility Function Improvements}
\label{futurework_feasibility}
The constrained novelty search approach presented in this paper requires solutions to be decoded from their genotype to the corresponding phenotype in order to calculate their distance to feasibility. While the conversion process is not slow, it is by far the slowest part of the constrained novelty search process, and any approach that does not require conversion from genotype to phenotype would likely provide large increase in runtime 

The obvious approach would be to change the feasibility requirement to not require a path between bases (and thus require no conversion), but this would radically change the constraints of the search. Another approach would be to change the genotype to include a way to calculate if a path between starting bases is present without performing the conversion.
\section{Pre-processing Base Maps}
\label{futurework_preprocess}
The three different search approaches presented in this thesis all rely on the base maps generated by the cellular automata. The search is performed with the assumption that the base maps have the potential to become viable StarCraft maps and are of a high quality in themselves. Because the search methods rely so heavily on the quality of the base maps, it would be reasonable to look into further optimisations of the base map generation. The simplest approach would be to generate the maps as done in the current approach, but with an evaluation process that removes bad base maps from the search. Another approach would be to "fix" bad starting maps by altering them until they meet certain criteria (e.g. more concentrated amounts of height level 2). However, the optimal solution would likely be to improve the sets of rules used by the cellular automata, such that the base maps generated by the cellular automata are simply of a higher quality.